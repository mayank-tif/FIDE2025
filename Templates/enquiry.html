{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enquiry Details - FIDE World Cup 2025</title>
  <link rel="stylesheet" href="{% static 'assets/css/app.css' %}">
</head>
<body>
  <div class="app-shell">
    {% include 'sidebar.html' %}
    <main class="main-content">
      <div class="page-header">
        <h1>Enquiry Details</h1>
      </div>
      <div id="message-container" style="position: fixed; top: 20px; right: 20px; z-index: 9999;">
        <!-- Messages will be dynamically inserted here -->
      </div>

      <div class="toolbar">
        <div class="logistics-search">
          <input type="text" id="searchInput" placeholder="Search Player" value="{{ search_query }}">
          <button id="searchBtn" style="height: 31px;">Search</button>
        </div>
      </div>

      <div class="logistics-table-container">
        <div class="logistics-table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Player Name</th>
                <th>Enquiry</th>
                <th>Recieved on</th>
              </tr>
            </thead>
            <tbody>
              {% for e in enquiries %}
              <tr>
                <td>{{ e.player.name }}</td>
                <td>{{ e.message }}</td>
                <td>{{ e.created_on }}</td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="2" class="text-center">No enquiries found.</td>
              </tr>
              {% endfor %}
            </tbody>

          </table>
        </div>

        <div class="pagination" id="paginationContainer">
          {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
          {% endif %}
          <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
          {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Next</a>
          {% endif %}
        </div>
      </div>
    </main>
  </div>
  <script src="{% static 'assets/js/app.js' %}"></script>
<script>
  document.getElementById("searchBtn").addEventListener("click", function() {
    const query = document.getElementById("searchInput").value;
    window.location.href = `?search=${encodeURIComponent(query)}`;
  });

  document.getElementById("searchInput").addEventListener("keypress", function(e) {
    if (e.key === 'Enter') {
      const query = this.value;
      window.location.href = `?search=${encodeURIComponent(query)}`;
    }
  });
</script>

</body>
</html>
